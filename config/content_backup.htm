<h1><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">關於</span></span></span></span></h1>
<p><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">這是</span></span><a href="https://github.com/mdecourse/cmstemplate"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">https://github.com/mdecourse/cmstemplate</span></span></a></p>
<p>目前的 cmsimde 在編輯器下方新增一個 csave 按鈕, 意即 collabrative save, 當動態網際管理系統在多人同時維護登入維護網頁內容時, 編輯各頁面時段, 該頁面可能已經改版, 因此使用 csave 按鈕存檔時, 會導入當下最新的該頁面內容, 並試圖與編輯中的頁面內容進行合併.</p>
<p>使用 csave 按鈕存檔無法刪除頁面資料.</p>
<p>使用 Edit All 模式, 無法使用 csave 按鈕（尚未測試).</p>
<p><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">123</span></span></span></span></p>
<p><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">測試</span></span></p>
<p><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">測試</span></span></span></span></p>
<p><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">????</span></span></span></span></p>
<h1><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">上課內容</span></span></span></span></h1>
<h2><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">W1</span></span></span></span></h2>
<h6><span>網際內容管理課程簡介</span></h6>
<p><span><img alt="" src="https://youtu.be/hZMriptiTU4"/><a href="https://youtu.be/hZMriptiTU4" target="_blank"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">https://youtu.be/hZMriptiTU4</span></span></a></span></p>
<h6><span>網際內容管理將從學校教務主機, 以 Flask 與 bs4 擷取出各種相關資料作為開端, 以下為初步流程介紹:</span></h6>
<p><span><a href="https://youtu.be/37l2T6lF2oo" target="_blank"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">https://youtu.be/37l2T6lF2oo</span></span></a></span></p>
<p><span>為從 <a href="http://a.kmol.info:88/">http://a.kmol.info:88</a><span><span> </span>取下 Python 3.9.1 版的可攜程式系統, 特別將需要 @gm 權限的兩階段程式系統, 從 @gm 移動到<span> </span></span><a href="http://a.kmol.info:88/">http://a.kmol.info:88</a><span>, 其中使用 sftp 與 ssh 對 a.kmol.info 進行連線:</span></span></p>
<p><span><span><a href="https://youtu.be/OaOdFv3EbIs" target="_blank"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">https://youtu.be/OaOdFv3EbIs</span></span></a></span></span></p>
<h2><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">W2</span></span></span></span></h2>
<p><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span> 說明 KMOLab 基本概念就是希望機械設計工程師能夠善用計算機程式與網路, 讓產品開發流程更有效率.</span></span></span></p>
<p><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span><a href="https://youtu.be/9-Qu-xwJmRE" target="_blank"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">https://youtu.be/9-Qu-xwJmRE</span></span></a></span></span></span></p>
<p><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span>說明與 cmsimde 編輯及轉靜態網頁有關的認知</span></span></span></p>
<p><span style="vertical-align: inherit;"><span style="vertical-align: inherit;"><span><a href="https://youtu.be/s5ty-MpnK7c" target="_blank"><span style="vertical-align: inherit;"><span style="vertical-align: inherit;">https://youtu.be/s5ty-MpnK7c</span></span></a></span></span></span></p>
<p><br/><br/>說明 topic0 執行動機以及自選組員後所衍生相關資料擷取問題的因應及處理<iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/ZHeFGqNRaDw" width="560"></iframe></p>
<h2>W3</h2>
<h6>自選組員 6 人一組</h6>
<h2>W4</h2>
<p>1. 各組根據 W1 - W3 的課程內容從<span> </span><a href="https://qry.nfu.edu.tw/">https://qry.nfu.edu.tw/</a><span> </span>以網際程式截取四技設一甲班上各課程的開課時段與修課人員名單, 並使用<span> </span><a href="https://github.com/mdecourse/nfulist">https://github.com/mdecourse/nfulist</a><span> </span>程式架構, 將分組程式送到<span> </span><a href="https://www.heroku.com/">Heroku</a><span> </span>伺服.</p>
<p><a href="http://mde.tw/cp2020/content/Heroku.html">http://mde.tw/cp2020/content/Heroku.html</a></p>
<p><a href="http://mde.tw/cp2020/content/nfu-project.html">http://mde.tw/cp2020/content/nfu-project.html</a></p>
<p><a href="http://mde.tw/cp2020/content/scissor-rock-paper.html">http://mde.tw/cp2020/content/scissor-rock-paper.html</a></p>
<p>2.<span> </span><a href="http://mde.tw/wcmj2021/content/W4.html">http://mde.tw/wcmj2021/content/W4.html</a></p>
<p>3. 請根據<span> </span><a href="https://qry.nfu.edu.tw/classroom.php">https://qry.nfu.edu.tw/classroom.php</a><span> </span>中有關機械設計工程系相關的實習實驗室排課時數, 按照排課時數多寡, 列出各實習實驗室的總排課時數表.</p>
<p>4. 請問從各學制的班級名條 (<a href="https://qry.nfu.edu.tw/classlist.php">https://qry.nfu.edu.tw/classlist.php</a>) 統計, 可以算出各學制 2021 Spring 總註冊人數嗎?</p>
<p>練習英文打字與寫作編輯:</p>
<p>請將下列 paper 重新打字整理為 .txt 純文字檔案, 之後再利用 LaTeX 整理為 pdf 檔案.</p>
<p><a href="http://mde.tw/cd2021/downloads/typing_practice/1990_evaluating_the_use_of_cad_systems_in_mechanical_design_engineering.pdf">1990_evaluating_the_use_of_cad_systems_in_mechanical_design_engineering.pdf</a></p>
<h2>W5</h2>
<p><span>假如您使用的 cmsimde 並不是最新版本, 可以設法進入 cmsimde 子目錄後, 以 git pull origin master 拉回最新版本的程式碼, 並且注意是否 cmsimde/up_dir 目錄中有檔案更新, 若是則必須將這些隨著版次更新的檔案, 從 up_dir 複製到倉儲根目錄.</span></p>
<p><span><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/WvkJ1wMAUE4" width="560"></iframe></span></p>
<p><span>為了要讓各組組員更清楚網際內容管理課程內容, 以及期中簡報必須涵蓋的內容,  特別將 W1-W4 與課程相關的頁面及內容加以說明.</span></p>
<p><span><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/4IXLYSmtRT0" width="560"></iframe></span></p>
<p><span>說明如何利用 Putty 設定以 SSH 將近端版本推送至 Github</span></p>
<p><span><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/l5vJYuwb2uU" width="560"></iframe></span></p>
<p>實習目的:</p>
<ol>
<li>利用網際模組擷取資料 (<a href="https://requests.readthedocs.io/en/master/">Python requests</a>)</li>
<li>利用 bs4 擷取網頁資料</li>
<li>利用 Flask 編寫網際程式</li>
<li>利用 Heroku 部署網際程式</li>
<li>利用 Ubuntu 虛擬主機作為伺服器</li>
</ol>
<p>先看懂<span> </span><a href="https://github.com/mdecourse/scissor-rock-paper2/blob/main/wsgi.py">https://github.com/mdecourse/scissor-rock-paper2/blob/main/wsgi.py</a></p>
<p><span class="pl-s1">request</span>.<span class="pl-s1">args</span>.<span class="pl-en">get</span>(<span class="pl-s">'user'</span>) 以 GET 方式取得 user 出拳變數值</p>
<p>電腦出拳以亂數取值</p>
<p>兩者比較後傳回超文件顯示比賽結果</p>
<p>部署到 Heroku 需要<span> </span><a href="https://raw.githubusercontent.com/mdecourse/scissor-rock-paper2/main/requirements.txt">requirements.txt</a>,<span> </span><a href="https://raw.githubusercontent.com/mdecourse/scissor-rock-paper2/main/runtime.txt">runtime.txt</a><span> </span>與<span> </span><a href="https://raw.githubusercontent.com/mdecourse/scissor-rock-paper2/main/Procfile">Procfile</a>.</p>
<p>接著請試著透過<span> </span><a href="http://mde.tw/lab/content/Heroku.html">http://mde.tw/lab/content/Heroku.html</a><span> </span>與<span> </span><a href="http://mde.tw/cp2020/content/Heroku.html">http://mde.tw/cp2020/content/Heroku.html</a><span> </span>的導引, 將<span> </span><a href="http://mde.tw/wcm2021/content/Topic%200.html">Topic0</a><span> </span>中的機械設計系實驗室排課時間表程式部署到 Heroku. 至於個人 Github 靜態網站也可以同步一份到 Heroku.</p>
<p>Beautifulsoup 參考教材:</p>
<p><a href="http://mde.tw/wcm2021/downloads/beautifulsoup.pdf">beautifulsoup.pdf</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/WebScraping_with_bs4.pdf">WebScraping_with_bs4.pdf</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/beautiful_soup_tutorial.pdf">beautiful_soup_tutorial.pdf</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/2019_beautifulsoup_document.pdf">2019_beautifulsoup_document.pd</a></p>
<p>Flask 參考教材:</p>
<p><a href="http://mde.tw/wcm2021/downloads/flask.pdf">flask.pdf</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/flask_tutorial.pdf">flask_tutorial.pdf</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/flask_document.pdf">flask_document.pdf</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/2021_flask_document.pdf">2021_flask_document.pdf</a></p>
<p><a href="https://realpython.com/primer-on-python-decorators/">https://realpython.com/primer-on-python-decorators/</a></p>
<p><a href="https://www.programiz.com/python-programming/decorator">https://www.programiz.com/python-programming/decorator</a></p>
<p><a href="https://www.python-course.eu/python3_decorators.php">https://www.python-course.eu/python3_decorators.php</a></p>
<p>Python has a feature called decorators to add functionality to an existing code. This is also called metaprogramming because a part of the program tries to modify another part of the program at compile time.</p>
<p>Decorators allow us to wrap another function in order to extend the behavior of the wrapped function, without permanently modifying it.</p>
<p>Heroku 參考教材:</p>
<p><a href="http://mde.tw/cp2020/content/Heroku.html">http://mde.tw/cp2020/content/Heroku.html</a></p>
<p><a href="http://mde.tw/cp2020/content/scissor-rock-paper.html">http://mde.tw/cp2020/content/scissor-rock-paper.html</a><span> </span>(<a href="https://scissor-rock-paper.herokuapp.com/">https://scissor-rock-paper.herokuapp.com</a>)</p>
<p><a href="https://github.com/mdecourse/scissor-rock-paper2">https://github.com/mdecourse/scissor-rock-paper2</a><span> </span>(<a href="https://scissor-rock-paper2.herokuapp.com/">https://scissor-rock-paper2.herokuapp.com/</a>)</p>
<p><a href="http://mde.tw/wcm2021/downloads/heroku.pdf">heroku.pdf</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/2017_web_apps.pdf">2017_web_apps.pdf</a></p>
<p><a href="https://assets.ubuntu.com/v1/f954307f-ubuntu-server-guide.pdf">Ubuntu server 參考教材</a>.</p>
<p><a href="http://mde.tw/wcm2021/content/Topic%200.html">Topic 0</a><span> </span>已經列出兩組可以從學校教務主機擷取資料的程式, 分別可以根據學期代號與班級代號取出班級排課表, 還有利用學期代號與實習實驗室代號擷取排客時間表.</p>
<p>接下來實習的目標是希望寫一組程式可以擷取機械設計工程系各實習實驗室排課表, 並且統計各實驗室每週排課總時數.</p>
<p>我們先來看<span> </span><a href="https://requests.readthedocs.io/en/master/">Python requests</a><span> </span>的用法:</p>
<p>W5_requests_ex1.py</p>
<div>
<div class="syntaxhighlighter py" id="highlighter_169857">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="py keyword">import</code> <code class="py plain">requests</code></div>
<div class="line number2 index1 alt1"> </div>
<div class="line number3 index2 alt2"><code class="py plain">r </code><code class="py keyword">=</code> <code class="py plain">requests.get(</code><code class="py string">"https://mde.tw"</code><code class="py plain">)</code></div>
<div class="line number4 index3 alt1"><code class="py functions">print</code><code class="py plain">(</code><code class="py string">"status_code:"</code><code class="py plain">, r.status_code)</code></div>
<div class="line number5 index4 alt2"><code class="py functions">print</code><code class="py plain">(</code><code class="py string">"content-type:"</code><code class="py plain">, r.headers[</code><code class="py string">'content-type'</code><code class="py plain">])</code></div>
<div class="line number6 index5 alt1"><code class="py functions">print</code><code class="py plain">(</code><code class="py string">"encoding:"</code><code class="py plain">, r.encoding)</code></div>
<div class="line number7 index6 alt2"><code class="py functions">print</code><code class="py plain">(</code><code class="py string">"text:"</code><code class="py plain">, r.text)</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>要看懂下列程式, 必須知道何謂<span> </span><a href="https://developer.mozilla.org/en-US/docs/Glossary/Entity">html entity</a>, 而且要會使用 requests.post() 與 bs4.BeautifulSoup()</p>
<div>
<div class="syntaxhighlighter py" id="highlighter_660358">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
<div class="line number16 index15 alt1">16</div>
<div class="line number17 index16 alt2">17</div>
<div class="line number18 index17 alt1">18</div>
<div class="line number19 index18 alt2">19</div>
<div class="line number20 index19 alt1">20</div>
<div class="line number21 index20 alt2">21</div>
<div class="line number22 index21 alt1">22</div>
<div class="line number23 index22 alt2">23</div>
<div class="line number24 index23 alt1">24</div>
<div class="line number25 index24 alt2">25</div>
<div class="line number26 index25 alt1">26</div>
<div class="line number27 index26 alt2">27</div>
<div class="line number28 index27 alt1">28</div>
<div class="line number29 index28 alt2">29</div>
<div class="line number30 index29 alt1">30</div>
<div class="line number31 index30 alt2">31</div>
<div class="line number32 index31 alt1">32</div>
<div class="line number33 index32 alt2">33</div>
<div class="line number34 index33 alt1">34</div>
<div class="line number35 index34 alt2">35</div>
<div class="line number36 index35 alt1">36</div>
<div class="line number37 index36 alt2">37</div>
<div class="line number38 index37 alt1">38</div>
<div class="line number39 index38 alt2">39</div>
<div class="line number40 index39 alt1">40</div>
<div class="line number41 index40 alt2">41</div>
<div class="line number42 index41 alt1">42</div>
<div class="line number43 index42 alt2">43</div>
<div class="line number44 index43 alt1">44</div>
<div class="line number45 index44 alt2">45</div>
<div class="line number46 index45 alt1">46</div>
<div class="line number47 index46 alt2">47</div>
<div class="line number48 index47 alt1">48</div>
<div class="line number49 index48 alt2">49</div>
<div class="line number50 index49 alt1">50</div>
<div class="line number51 index50 alt2">51</div>
<div class="line number52 index51 alt1">52</div>
<div class="line number53 index52 alt2">53</div>
<div class="line number54 index53 alt1">54</div>
<div class="line number55 index54 alt2">55</div>
<div class="line number56 index55 alt1">56</div>
<div class="line number57 index56 alt2">57</div>
<div class="line number58 index57 alt1">58</div>
<div class="line number59 index58 alt2">59</div>
<div class="line number60 index59 alt1">60</div>
<div class="line number61 index60 alt2">61</div>
<div class="line number62 index61 alt1">62</div>
<div class="line number63 index62 alt2">63</div>
<div class="line number64 index63 alt1">64</div>
<div class="line number65 index64 alt2">65</div>
<div class="line number66 index65 alt1">66</div>
<div class="line number67 index66 alt2">67</div>
<div class="line number68 index67 alt1">68</div>
<div class="line number69 index68 alt2">69</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="py keyword">import</code> <code class="py plain">requests</code></div>
<div class="line number2 index1 alt1"><code class="py keyword">import</code> <code class="py plain">bs4</code></div>
<div class="line number3 index2 alt2"><code class="py comments"># for os.environ and os.system()</code></div>
<div class="line number4 index3 alt1"><code class="py keyword">import</code> <code class="py plain">os</code></div>
<div class="line number5 index4 alt2"><code class="py comments"># for geting html file path</code></div>
<div class="line number6 index5 alt1"><code class="py keyword">import</code> <code class="py plain">pathlib</code></div>
<div class="line number7 index6 alt2"><code class="py spaces"> </code> </div>
<div class="line number8 index7 alt1"><code class="py comments"># for pythn 3.9</code></div>
<div class="line number9 index8 alt2"><code class="py plain">proxy </code><code class="py keyword">=</code> <code class="py string">'http://[2001:288:6004:17::69]:3128'</code></div>
<div class="line number10 index9 alt1"><code class="py spaces"> </code> </div>
<div class="line number11 index10 alt2"><code class="py plain">os.environ[</code><code class="py string">'http_proxy'</code><code class="py plain">] </code><code class="py keyword">=</code> <code class="py plain">proxy </code></div>
<div class="line number12 index11 alt1"><code class="py plain">os.environ[</code><code class="py string">'HTTP_PROXY'</code><code class="py plain">] </code><code class="py keyword">=</code> <code class="py plain">proxy</code></div>
<div class="line number13 index12 alt2"><code class="py plain">os.environ[</code><code class="py string">'https_proxy'</code><code class="py plain">] </code><code class="py keyword">=</code> <code class="py plain">proxy</code></div>
<div class="line number14 index13 alt1"><code class="py plain">os.environ[</code><code class="py string">'HTTPS_PROXY'</code><code class="py plain">] </code><code class="py keyword">=</code> <code class="py plain">proxy</code></div>
<div class="line number15 index14 alt2"><code class="py spaces"> </code> </div>
<div class="line number16 index15 alt1"><code class="py comments">'''</code></div>
<div class="line number17 index16 alt2"><code class="py comments">url:  'class_ajax.php',</code></div>
<div class="line number18 index17 alt1"><code class="py comments">data: { pselyr: pselyr, pselclss: pselclss</code></div>
<div class="line number19 index18 alt2"><code class="py comments">'''</code></div>
<div class="line number20 index19 alt1"><code class="py plain">semester </code><code class="py keyword">=</code> <code class="py string">'1092'</code></div>
<div class="line number21 index20 alt2"><code class="py plain">classno </code><code class="py keyword">=</code> <code class="py string">'42311'</code></div>
<div class="line number22 index21 alt1"><code class="py plain">column </code><code class="py keyword">=</code> <code class="py color1">True</code></div>
<div class="line number23 index22 alt2"><code class="py spaces"> </code> </div>
<div class="line number24 index23 alt1"><code class="py keyword">if</code> <code class="py plain">semester </code><code class="py keyword">=</code><code class="py keyword">=</code> <code class="py color1">None</code><code class="py plain">:</code></div>
<div class="line number25 index24 alt2"><code class="py spaces">    </code><code class="py plain">semester </code><code class="py keyword">=</code> <code class="py string">'1091'</code></div>
<div class="line number26 index25 alt1"><code class="py keyword">if</code> <code class="py plain">classno </code><code class="py keyword">=</code><code class="py keyword">=</code> <code class="py color1">None</code><code class="py plain">:</code></div>
<div class="line number27 index26 alt2"><code class="py spaces">    </code><code class="py comments"># 42311 is 設一甲</code></div>
<div class="line number28 index27 alt1"><code class="py spaces">    </code><code class="py plain">classno </code><code class="py keyword">=</code> <code class="py string">'42311'</code></div>
<div class="line number29 index28 alt2"><code class="py spaces">     </code> </div>
<div class="line number30 index29 alt1"><code class="py plain">headers </code><code class="py keyword">=</code> <code class="py plain">{</code><code class="py string">'X-Requested-With'</code><code class="py plain">: </code><code class="py string">'XMLHttpRequest'</code><code class="py plain">}</code></div>
<div class="line number31 index30 alt2"><code class="py spaces"> </code> </div>
<div class="line number32 index31 alt1"><code class="py plain">url </code><code class="py keyword">=</code> <code class="py string">'https://qry.nfu.edu.tw/class_ajax.php'</code></div>
<div class="line number33 index32 alt2"><code class="py plain">post_var </code><code class="py keyword">=</code> <code class="py plain">{</code><code class="py string">'pselyr'</code><code class="py plain">: semester, </code><code class="py string">'pselclss'</code><code class="py plain">: classno}</code></div>
<div class="line number34 index33 alt1"><code class="py spaces"> </code> </div>
<div class="line number35 index34 alt2"><code class="py plain">result </code><code class="py keyword">=</code> <code class="py plain">requests.post(url, data </code><code class="py keyword">=</code> <code class="py plain">post_var, headers </code><code class="py keyword">=</code> <code class="py plain">headers)</code></div>
<div class="line number36 index35 alt1"><code class="py spaces"> </code> </div>
<div class="line number37 index36 alt2"><code class="py comments"># result.content 傳回 binary 資料</code></div>
<div class="line number38 index37 alt1"><code class="py comments"># soup = bs4.BeautifulSoup(result.content, 'lxml')</code></div>
<div class="line number39 index38 alt2"><code class="py comments"># result.text 傳回純文字資料</code></div>
<div class="line number40 index39 alt1"><code class="py plain">soup </code><code class="py keyword">=</code> <code class="py plain">bs4.BeautifulSoup(result.text, </code><code class="py string">'lxml'</code><code class="py plain">)</code></div>
<div class="line number41 index40 alt2"><code class="py spaces"> </code> </div>
<div class="line number42 index41 alt1"><code class="py comments"># 先除掉所有 anchor</code></div>
<div class="line number43 index42 alt2"><code class="py keyword">for</code> <code class="py plain">a </code><code class="py keyword">in</code> <code class="py plain">soup.findAll(</code><code class="py string">'a'</code><code class="py plain">):</code></div>
<div class="line number44 index43 alt1"><code class="py spaces">    </code><code class="py comments"># bs3 語法</code></div>
<div class="line number45 index44 alt2"><code class="py spaces">    </code><code class="py comments">#a.replaceWithChildren()</code></div>
<div class="line number46 index45 alt1"><code class="py spaces">    </code><code class="py comments"># bs4 語法, 將標註與內容拆開</code></div>
<div class="line number47 index46 alt2"><code class="py spaces">    </code><code class="py plain">a.unwrap()</code></div>
<div class="line number48 index47 alt1"><code class="py spaces"> </code> </div>
<div class="line number49 index48 alt2"><code class="py comments"># 根據輸出設定, 取出 class='tbcls' 的 table 資料</code></div>
<div class="line number50 index49 alt1"><code class="py plain">table </code><code class="py keyword">=</code> <code class="py plain">soup.find(</code><code class="py string">'table'</code><code class="py plain">, {</code><code class="py string">'class'</code><code class="py plain">: </code><code class="py string">'tbcls'</code><code class="py plain">})</code></div>
<div class="line number51 index50 alt2"><code class="py spaces"> </code> </div>
<div class="line number52 index51 alt1"><code class="py comments"># 重建 table, 設定邊線為 1 pixel</code></div>
<div class="line number53 index52 alt2"><code class="py plain">output </code><code class="py keyword">=</code> <code class="py string">"&lt;table border='1'&gt;"</code></div>
<div class="line number54 index53 alt1"><code class="py spaces"> </code> </div>
<div class="line number55 index54 alt2"><code class="py keyword">for</code> <code class="py plain">i </code><code class="py keyword">in</code> <code class="py plain">table.contents:</code></div>
<div class="line number56 index55 alt1"><code class="py spaces">    </code><code class="py comments"># 利用 replace 復原  </code></div>
<div class="line number57 index56 alt2"><code class="py spaces">    </code><code class="py comments"># https://www.w3schools.com/html/html_entities.asp</code></div>
<div class="line number58 index57 alt1"><code class="py spaces">    </code><code class="py comments"># https://developer.mozilla.org/en-US/docs/Glossary/Entity</code></div>
<div class="line number59 index58 alt2"><code class="py spaces">    </code><code class="py plain">output </code><code class="py keyword">+</code><code class="py keyword">=</code> <code class="py functions">str</code><code class="py plain">(i).replace(</code><code class="py string">"&amp;amp;nbsp"</code><code class="py plain">, </code><code class="py string">" "</code><code class="py plain">)</code></div>
<div class="line number60 index59 alt1"><code class="py plain">output </code><code class="py keyword">+</code><code class="py keyword">=</code> <code class="py string">"&lt;/table&gt;"</code></div>
<div class="line number61 index60 alt2"><code class="py comments"># print(output)</code></div>
<div class="line number62 index61 alt1"><code class="py comments"># 將 output 寫入 w1_class_local.html</code></div>
<div class="line number63 index62 alt2"><code class="py plain">with </code><code class="py functions">open</code><code class="py plain">(</code><code class="py string">"w1_class_local.html"</code><code class="py plain">, </code><code class="py string">"w"</code><code class="py plain">, encoding</code><code class="py keyword">=</code><code class="py string">"utf-8"</code><code class="py plain">) as </code><code class="py functions">file</code><code class="py plain">:</code></div>
<div class="line number64 index63 alt1"><code class="py spaces">    </code><code class="py functions">file</code><code class="py plain">.write(output)</code></div>
<div class="line number65 index64 alt2"><code class="py comments"># 利用 os.system() 以 default browser 開啟 w1_class_local.html</code></div>
<div class="line number66 index65 alt1"><code class="py plain">filePath </code><code class="py keyword">=</code> <code class="py plain">pathlib.Path(__file__).parent.absolute()</code></div>
<div class="line number67 index66 alt2"><code class="py comments">#print(filePath)</code></div>
<div class="line number68 index67 alt1"><code class="py comments"># set firefox as default browser and start url to open html file</code></div>
<div class="line number69 index68 alt2"><code class="py plain">os.system(</code><code class="py string">"start file:///"</code> <code class="py keyword">+</code> <code class="py functions">str</code><code class="py plain">(filePath) </code><code class="py keyword">+</code> <code class="py string">"\\w1_class_local.html"</code><code class="py plain">)</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>以上在 CMSMDE 列出程式碼, 有一個技巧, 針對<span> </span><a href="https://developer.mozilla.org/en-US/docs/Glossary/Entity">Html entity</a><span> </span>符號必須將 &amp; 表示為 &amp;amp; 否則在頁面程式引用時無法正確顯示出原始碼內容.</p>
<p>Flask example:</p>
<div>
<div class="syntaxhighlighter py" id="highlighter_408855">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
<div class="line number16 index15 alt1">16</div>
<div class="line number17 index16 alt2">17</div>
<div class="line number18 index17 alt1">18</div>
<div class="line number19 index18 alt2">19</div>
<div class="line number20 index19 alt1">20</div>
<div class="line number21 index20 alt2">21</div>
<div class="line number22 index21 alt1">22</div>
<div class="line number23 index22 alt2">23</div>
<div class="line number24 index23 alt1">24</div>
<div class="line number25 index24 alt2">25</div>
<div class="line number26 index25 alt1">26</div>
<div class="line number27 index26 alt2">27</div>
<div class="line number28 index27 alt1">28</div>
<div class="line number29 index28 alt2">29</div>
<div class="line number30 index29 alt1">30</div>
<div class="line number31 index30 alt2">31</div>
<div class="line number32 index31 alt1">32</div>
<div class="line number33 index32 alt2">33</div>
<div class="line number34 index33 alt1">34</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="py keyword">from</code> <code class="py plain">flask </code><code class="py keyword">import</code> <code class="py plain">Flask, request</code></div>
<div class="line number2 index1 alt1"><code class="py keyword">from</code> <code class="py plain">datetime </code><code class="py keyword">import</code> <code class="py plain">datetime</code></div>
<div class="line number3 index2 alt2"><code class="py keyword">import</code> <code class="py plain">os</code></div>
<div class="line number4 index3 alt1"> </div>
<div class="line number5 index4 alt2"><code class="py comments"># for pythn 3.9</code></div>
<div class="line number6 index5 alt1"><code class="py plain">proxy </code><code class="py keyword">=</code> <code class="py string">'http://[2001:288:6004:17::69]:3128'</code></div>
<div class="line number7 index6 alt2"><code class="py comments">''' </code></div>
<div class="line number8 index7 alt1"><code class="py comments">os.environ['http_proxy'] = proxy </code></div>
<div class="line number9 index8 alt2"><code class="py comments">os.environ['HTTP_PROXY'] = proxy</code></div>
<div class="line number10 index9 alt1"><code class="py comments">os.environ['https_proxy'] = proxy</code></div>
<div class="line number11 index10 alt2"><code class="py comments">os.environ['HTTPS_PROXY'] = proxy</code></div>
<div class="line number12 index11 alt1"><code class="py comments">'''</code></div>
<div class="line number13 index12 alt2"><code class="py plain">app </code><code class="py keyword">=</code> <code class="py plain">Flask(__name__)</code></div>
<div class="line number14 index13 alt1"> </div>
<div class="line number15 index14 alt2"><code class="py comments"># https://realpython.com/primer-on-python-decorators/</code></div>
<div class="line number16 index15 alt1"><code class="py decorator">@app</code><code class="py plain">.route(</code><code class="py string">'/'</code><code class="py plain">)</code></div>
<div class="line number17 index16 alt2"><code class="py keyword">def</code> <code class="py plain">hello():</code></div>
<div class="line number18 index17 alt1"><code class="py spaces">    </code><code class="py comments"># 若取不到 name 則 name = None</code></div>
<div class="line number19 index18 alt2"><code class="py spaces">    </code><code class="py plain">name </code><code class="py keyword">=</code> <code class="py plain">request.args.get(</code><code class="py string">'name'</code><code class="py plain">)</code></div>
<div class="line number20 index19 alt1"><code class="py spaces">    </code><code class="py keyword">if</code> <code class="py plain">name </code><code class="py keyword">=</code><code class="py keyword">=</code> <code class="py color1">None</code><code class="py plain">:</code></div>
<div class="line number21 index20 alt2"><code class="py spaces">        </code><code class="py plain">name </code><code class="py keyword">=</code> <code class="py string">"test"</code></div>
<div class="line number22 index21 alt1"><code class="py spaces">    </code><code class="py comments"># https://realpython.com/python-formatted-output/</code></div>
<div class="line number23 index22 alt2"><code class="py spaces">    </code><code class="py keyword">return</code> <code class="py plain">HELLO_HTML.</code><code class="py functions">format</code><code class="py plain">(</code></div>
<div class="line number24 index23 alt1"><code class="py spaces">            </code><code class="py plain">name, </code><code class="py functions">str</code><code class="py plain">(datetime.now()))</code></div>
<div class="line number25 index24 alt2"> </div>
<div class="line number26 index25 alt1"><code class="py plain">HELLO_HTML </code><code class="py keyword">=</code> <code class="py comments">"""</code></div>
<div class="line number27 index26 alt2"><code class="py spaces">    </code><code class="py comments">&lt;html&gt;&lt;body&gt;</code></div>
<div class="line number28 index27 alt1"><code class="py spaces">        </code><code class="py comments">&lt;h1&gt;Hello, {0}!&lt;/h1&gt;</code></div>
<div class="line number29 index28 alt2"><code class="py spaces">        </code><code class="py comments">現在時間為: {1}.</code></div>
<div class="line number30 index29 alt1"><code class="py spaces">    </code><code class="py comments">&lt;/body&gt;&lt;/html&gt;"""</code></div>
<div class="line number31 index30 alt2"> </div>
<div class="line number32 index31 alt1"><code class="py keyword">if</code> <code class="py plain">__name__ </code><code class="py keyword">=</code><code class="py keyword">=</code> <code class="py string">"__main__"</code><code class="py plain">:</code></div>
<div class="line number33 index32 alt2"><code class="py spaces">    </code><code class="py comments"># Launch the Flask dev server</code></div>
<div class="line number34 index33 alt1"><code class="py spaces">    </code><code class="py plain">app.run(host</code><code class="py keyword">=</code><code class="py string">"localhost"</code><code class="py plain">, debug</code><code class="py keyword">=</code><code class="py color1">True</code><code class="py plain">)</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<h2>W6</h2>
<p><span>步驟一:</span><span> </span>(<span>建立 Heroku 帳號</span>) 進入<span> </span><a href="https://heroku.com/">https://heroku.com</a>, 利用學校配發的 @gm 登記一個 Heroku 帳號, 關鍵在於密碼設定必須要至少 8 個字元, 且字元中必須包含符號, 英文字母及數字,  並且登記後要進入 @gm 帳號進行確認後才能開通 Heroku 帳號.</p>
<p>完成帳號登記後, 必須知道目前 Heroku 只允許免費建立五個應用程式, 且每個程式的最大容量為 500MB.</p>
<p><span>步驟二:</span><span> </span>(<span>建立 Heroku app</span>) 登入 Heroku 後, 先以 s + 學號 建立第一個 app, 完成後, 將可至 https://s學號.herokuapp.com 連線取得網站最初內容.</p>
<p><span>步驟三:</span><span> </span>(下載 Heroku CLI) 從<span> </span><a href="http://a.kmol.info:88/heroku.7z">http://a.kmol.info:88/heroku.7z</a><span> </span>下載 Heroku cli 程式檔案, 解開至隨身碟 Y: 所在位置或者是 Hybrid 設定的位置.</p>
<p><span>步驟四:</span><span> </span>(<span>修改命令搜尋路徑</span>) 修改隨身系統的啟動批次檔案, 讓 Windows 的命令視窗中可以執行 heroku.exe, 或者稱作"設法將 heroku.exe 所在目錄位置, 設為 Windows 搜尋路徑之一".</p>
<p>重新啟動已經納入可執行 heroku.exe 的隨身碟 start_ipv6.bat 或 start_ipv4.bat</p>
<p><span>步驟五:</span><span> </span>(<span>測試 heroku 執行</span>) 測試是否能夠在修改後的命令列中執行 heroku.exe, 輸入 heroku version 若回應所使用的版本表示上述路徑設定已經成功.</p>
<p><span>步驟六:</span><span> </span>(<span>設定 heroku 代理主機</span>) 先前我們已經知道網路的應用包含 client 與 server, 不同 client 採用不同的 proxy 設定與 server 連線, 其中 firefox 作為 WWW 網路協定的 client, 有其自己的網路 Proxy 設定, 也可以直接使用操作系統的 Proxy 設定.</p>
<p>Chrome 作為 WWW 網路協定的 client, 目前 Windows 下的最新版, 只能使用操作系統的 Proxy 設定.</p>
<p>而 git 作為 git client 與 github server 連線的 Proxy 設定, 則寫在 y:\home_ipv6 下的 .giconfig 中,  以 git config --global http.proxy "http://your_proxy:port" 進行設定.</p>
<p>相同的道理 heroku cli 作為<span> </span><a href="https://heroku.com/">https://heroku.com</a><span> </span>伺服器的 client 端, 也有其 Proxy 的設定方式, 也就是在 start_ipv6.bat 中加入:</p>
<div>
<div class="syntaxhighlighter js" id="highlighter_24078">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="js plain">REM </code><code class="js keyword">for</code> <code class="js plain">heroku login</code></div>
<div class="line number2 index1 alt1"><code class="js plain">set HTTP_PROXY=http:</code><code class="js comments">//[2001:288:6004:17::53]:3128</code></div>
<div class="line number3 index2 alt2"><code class="js plain">set HTTPS_PROXY=http:</code><code class="js comments">//[2001:288:6004:17::53]:3128</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><span>步驟七:</span><span> </span>(<span>設定同步倉儲</span>) 針對利用 Heroku 同步 Github Pages 上的網站內容, 只需要透過 git remote add (Heroku 指令為 heroku git:remote -a heroku_倉儲_名稱, 之後只要在 heroku login 狀態下, 可以直接利用 git push) 在近端設定一個連線到 Heroku 倉儲的代號, 就能在每次更新 Github Pages 倉儲後, 再將內容同步至 Heroku. 網際內容管理課程將使用兩種 Heroku app 設定, 也就是靜態網頁與動態網頁:</p>
<p>靜態網頁 - 採用 php 方式部署, 讓 Heroku 將靜態網頁視為 PHP 程式, 利用 index.php 跳轉到 index.html</p>
<p>動態網頁 - 讓 Heroku 執行 cmsimde/wsgi.py 的方式進行雲端伺服.</p>
<p><span>步驟八:</span><span> </span>(<span>以 git 進行提交推送</span>) 利用 heroku git:remote -a 設定的同步倉儲其推送名稱內定為 "heroku", 使用者只要使用 git push heroku 就可以將改版內容推送到對應的 Heroku app 倉儲.</p>
<p>指令操作步驟:</p>
<div>
<div class="syntaxhighlighter py" id="highlighter_471474">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="py comments"># 以 interactive 模式登入 Heroku, 完成後產生 y:\home_ipv6\_netrc</code></div>
<div class="line number2 index1 alt1"><code class="py plain">heroku login </code><code class="py keyword">-</code><code class="py plain">i</code></div>
<div class="line number3 index2 alt2"><code class="py comments"># 針對已經登入的 Heroku 帳號下的 taiwan-01 app, 設為此倉儲的 remote 同步倉儲, 且在倉儲中會自建名稱為 heroku 的 remoate site.</code></div>
<div class="line number4 index3 alt1"><code class="py plain">heroku git:remote </code><code class="py keyword">-</code><code class="py plain">a taiwan</code><code class="py keyword">-</code><code class="py plain">no1</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>上述步驟完成後的 Heroku 網站:<span> </span><a href="https://taiwan-no1.herokuapp.com/">https://taiwan-no1.herokuapp.com</a></p>
<h4>參考資料:</h4>
<p><a href="https://github.com/twtrubiks/Deploying-Flask-To-Heroku">https://github.com/twtrubiks/Deploying-Flask-To-Heroku</a></p>
<p><a href="https://gist.github.com/bradtraversy/0029d655269c8a972df726ed0ac56b88">https://gist.github.com/bradtraversy/0029d655269c8a972df726ed0ac56b88</a></p>
<p><a href="https://github.com/gmolveau/flask-sqlalchemy-heroku">https://github.com/gmolveau/flask-sqlalchemy-heroku</a></p>
<h2>W7</h2>
<p>之前的 git 倉儲都是先在 Github 網際平台上建立後, 再設法 git clone 到近端改版, 但是這樣的前提是在 Github 建立倉儲時, 至少新增一個檔案 README.md,  但是假如在 Github 建立一個空倉儲則通常會建議使用者先在近端以 git init 產生一個空的 git 倉儲後, 納入改版資料然後再透過 git remote add 設定與遠端的 Github 倉儲 URL 進行對應.</p>
<p>而通常針對特定倉儲的 defualt 遠端 URL 連結的 git remote add 會以 origin 作為代號.</p>
<p>以下列 nfumde 近端的 .git/config 設定檔案為例:</p>
<div>
<div class="syntaxhighlighter js" id="highlighter_451276">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
<div class="line number16 index15 alt1">16</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="js plain">[core]</code></div>
<div class="line number2 index1 alt1"><code class="js spaces">    </code><code class="js plain">repositoryformatversion = 0</code></div>
<div class="line number3 index2 alt2"><code class="js spaces">    </code><code class="js plain">filemode = </code><code class="js keyword">false</code></div>
<div class="line number4 index3 alt1"><code class="js spaces">    </code><code class="js plain">bare = </code><code class="js keyword">false</code></div>
<div class="line number5 index4 alt2"><code class="js spaces">    </code><code class="js plain">logallrefupdates = </code><code class="js keyword">true</code></div>
<div class="line number6 index5 alt1"><code class="js spaces">    </code><code class="js plain">symlinks = </code><code class="js keyword">false</code></div>
<div class="line number7 index6 alt2"><code class="js spaces">    </code><code class="js plain">ignorecase = </code><code class="js keyword">true</code></div>
<div class="line number8 index7 alt1"><code class="js plain">[remote </code><code class="js string">"origin"</code><code class="js plain">]</code></div>
<div class="line number9 index8 alt2"><code class="js spaces">    </code><code class="js plain">url = git@github.com:mdecourse/nfumde.git</code></div>
<div class="line number10 index9 alt1"><code class="js spaces">    </code><code class="js plain">fetch = +refs/heads/*:refs/remotes/origin/*</code></div>
<div class="line number11 index10 alt2"><code class="js plain">[remote </code><code class="js string">"heroku"</code><code class="js plain">]</code></div>
<div class="line number12 index11 alt1"><code class="js spaces">    </code><code class="js plain">url = https:</code><code class="js comments">//git.heroku.com/nfumde.git</code></div>
<div class="line number13 index12 alt2"><code class="js spaces">    </code><code class="js plain">fetch = +refs/heads/*:refs/remotes/heroku/*</code></div>
<div class="line number14 index13 alt1"><code class="js plain">[branch </code><code class="js string">"main"</code><code class="js plain">]</code></div>
<div class="line number15 index14 alt2"><code class="js spaces">    </code><code class="js plain">remote = origin</code></div>
<div class="line number16 index15 alt1"><code class="js spaces">    </code><code class="js plain">merge = refs/heads/main</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>當使用者在命令列中的特定目錄中以 git init 建立 .git 目錄時, .git/config 中只會有以下資料, 表示此目錄為 git 空倉儲, 尚未與遠端 Github 有任何對應:</p>
<div>
<div class="syntaxhighlighter js" id="highlighter_834374">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="js plain">[core]</code></div>
<div class="line number2 index1 alt1"><code class="js spaces">    </code><code class="js plain">repositoryformatversion = 0</code></div>
<div class="line number3 index2 alt2"><code class="js spaces">    </code><code class="js plain">filemode = </code><code class="js keyword">false</code></div>
<div class="line number4 index3 alt1"><code class="js spaces">    </code><code class="js plain">bare = </code><code class="js keyword">false</code></div>
<div class="line number5 index4 alt2"><code class="js spaces">    </code><code class="js plain">logallrefupdates = </code><code class="js keyword">true</code></div>
<div class="line number6 index5 alt1"><code class="js spaces">    </code><code class="js plain">symlinks = </code><code class="js keyword">false</code></div>
<div class="line number7 index6 alt2"><code class="js spaces">    </code><code class="js plain">ignorecase = </code><code class="js keyword">true</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>當使用者在該倉儲中, 執行 git remote add origin<span> </span><a href="mailto:git@github.com:mdecourse/nfumde.git">git@github.com:mdecourse/nfumde.git</a><span> </span>後, .git/config 中將增加此一 git remote add 設定資料而成為:</p>
<div>
<div class="syntaxhighlighter js" id="highlighter_896615">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="js plain">[core]</code></div>
<div class="line number2 index1 alt1"><code class="js spaces">    </code><code class="js plain">repositoryformatversion = 0</code></div>
<div class="line number3 index2 alt2"><code class="js spaces">    </code><code class="js plain">filemode = </code><code class="js keyword">false</code></div>
<div class="line number4 index3 alt1"><code class="js spaces">    </code><code class="js plain">bare = </code><code class="js keyword">false</code></div>
<div class="line number5 index4 alt2"><code class="js spaces">    </code><code class="js plain">logallrefupdates = </code><code class="js keyword">true</code></div>
<div class="line number6 index5 alt1"><code class="js spaces">    </code><code class="js plain">symlinks = </code><code class="js keyword">false</code></div>
<div class="line number7 index6 alt2"><code class="js spaces">    </code><code class="js plain">ignorecase = </code><code class="js keyword">true</code></div>
<div class="line number8 index7 alt1"><code class="js plain">[remote </code><code class="js string">"origin"</code><code class="js plain">]</code></div>
<div class="line number9 index8 alt2"><code class="js spaces">    </code><code class="js plain">url = git@github.com:mdecourse/nfumde.git</code></div>
<div class="line number10 index9 alt1"><code class="js spaces">    </code><code class="js plain">fetch = +refs/heads/*:refs/remotes/origin/*</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>當使用者在執行 git push --set-upstream origin main 或 git push -u origin main 時, 由於附加設定內建的 upstream 為 main 分支, 因此之後的 git push 與 git pull 若從 orgin 存取版本資料, 可以不用宣告分支, git 會假定存取 main 分支, 意即 git push 就是指 git push origin main. 此時.git/config 中將增加以下 upstream 設定:</p>
<div>
<div class="syntaxhighlighter js" id="highlighter_119370">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="js plain">[branch </code><code class="js string">"main"</code><code class="js plain">]</code></div>
<div class="line number2 index1 alt1"><code class="js spaces">    </code><code class="js plain">remote = origin</code></div>
<div class="line number3 index2 alt2"><code class="js spaces">    </code><code class="js plain">merge = refs/heads/main</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>最後若再執行 heroku login -i 以及 heroku git:remote -a nfumde, 也就是針對 Heroku 中的 nfumde app 設定 git remote add, 則最後的 .git/config 將成為:</p>
<div>
<div class="syntaxhighlighter js" id="highlighter_213384">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
<div class="line number16 index15 alt1">16</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="js plain">[core]</code></div>
<div class="line number2 index1 alt1"><code class="js spaces">    </code><code class="js plain">repositoryformatversion = 0</code></div>
<div class="line number3 index2 alt2"><code class="js spaces">    </code><code class="js plain">filemode = </code><code class="js keyword">false</code></div>
<div class="line number4 index3 alt1"><code class="js spaces">    </code><code class="js plain">bare = </code><code class="js keyword">false</code></div>
<div class="line number5 index4 alt2"><code class="js spaces">    </code><code class="js plain">logallrefupdates = </code><code class="js keyword">true</code></div>
<div class="line number6 index5 alt1"><code class="js spaces">    </code><code class="js plain">symlinks = </code><code class="js keyword">false</code></div>
<div class="line number7 index6 alt2"><code class="js spaces">    </code><code class="js plain">ignorecase = </code><code class="js keyword">true</code></div>
<div class="line number8 index7 alt1"><code class="js plain">[remote </code><code class="js string">"origin"</code><code class="js plain">]</code></div>
<div class="line number9 index8 alt2"><code class="js spaces">    </code><code class="js plain">url = git@github.com:mdecourse/nfumde.git</code></div>
<div class="line number10 index9 alt1"><code class="js spaces">    </code><code class="js plain">fetch = +refs/heads/*:refs/remotes/origin/*</code></div>
<div class="line number11 index10 alt2"><code class="js plain">[remote </code><code class="js string">"heroku"</code><code class="js plain">]</code></div>
<div class="line number12 index11 alt1"><code class="js spaces">    </code><code class="js plain">url = https:</code><code class="js comments">//git.heroku.com/nfumde.git</code></div>
<div class="line number13 index12 alt2"><code class="js spaces">    </code><code class="js plain">fetch = +refs/heads/*:refs/remotes/heroku/*</code></div>
<div class="line number14 index13 alt1"><code class="js plain">[branch </code><code class="js string">"main"</code><code class="js plain">]</code></div>
<div class="line number15 index14 alt2"><code class="js spaces">    </code><code class="js plain">remote = origin</code></div>
<div class="line number16 index15 alt1"><code class="js spaces">    </code><code class="js plain">merge = refs/heads/main</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>現在假如連倉儲的 origin url 都選擇自行設定, 其步驟如下:</p>
<ol>
<li>在近端命令視窗中, 以 git init (為了配合使用 main 作為主分支名稱, 可以使用 git config --global init.defaultBranch main 將設定寫入 home_ipv6\.gitconfig 中) 建立空的倉儲, 取得 Github 空倉儲的 url 後, 可以採用 https 或 SSH 模式進行 git remote add 的設定.</li>
<li>假如遠端的 Github 倉儲使用者帳號為 mdecourse, 而空倉儲名稱為 nfumde, 則其 https 的 url 為 <a href="https://github.com/mdecourse/nfumde">https://github.com/mdecourse/nfumde</a><a href="https://github.com/mdecourse/wcm_midterm,">,</a><span> </span>若採用 SSH 則其 url 為<span> </span><a href="mailto:git@my_putty_session:mdecourse/nfumde.git">git@my_putty_session:mdecourse/nfumde.git</a></li>
<li>步驟 2. 的指令為 git remote add origin https://github.com/mdecourse/nfumde.git, 或者使用 git remote add origin git@my_putty_session:mdecourse/nfumde.git</li>
<li>另外若將此一倉儲在近端使用 Heroku 的指令與遠端的 Heroku 名稱為 nfumde 的 app 進行對應設定, 則命令在 heroku login -i 之後, 以 heroku git:remote -a nfumde, 之後就可以透過 git push heroku 將此一倉儲的版本推向 Heroku.</li>
</ol>
<p>操作過程, 第一時間在近端以 git init 建立空倉儲時發現仍使用 master 作為主分支名稱, 因此利用 git config --global init.defaultBranch main 將設定存入 home_ipv6\.gitconfig 中, 將主分支名稱設為 main. 畫面如下:</p>
<p><img alt="" height="418" src="http://mde.tw/wcm2021/images/nfumde_heroku_app.png" width="800"/></p>
<p>以上所完成的 Heroku 網際程式:<span> </span><a href="http://nfumde.herokuapp.com/table">http://nfumde.herokuapp.com/table</a></p>
<p>假如要將上列網際程式改為 AJAX 模式, 可以參考下列程式碼, 以 button 的方式送出 AJAX 所需的 POST 變數:</p>
<div>
<div class="syntaxhighlighter py" id="highlighter_58175">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
<div class="line number16 index15 alt1">16</div>
<div class="line number17 index16 alt2">17</div>
<div class="line number18 index17 alt1">18</div>
<div class="line number19 index18 alt2">19</div>
<div class="line number20 index19 alt1">20</div>
<div class="line number21 index20 alt2">21</div>
<div class="line number22 index21 alt1">22</div>
<div class="line number23 index22 alt2">23</div>
<div class="line number24 index23 alt1">24</div>
<div class="line number25 index24 alt2">25</div>
<div class="line number26 index25 alt1">26</div>
<div class="line number27 index26 alt2">27</div>
<div class="line number28 index27 alt1">28</div>
<div class="line number29 index28 alt2">29</div>
<div class="line number30 index29 alt1">30</div>
<div class="line number31 index30 alt2">31</div>
<div class="line number32 index31 alt1">32</div>
<div class="line number33 index32 alt2">33</div>
<div class="line number34 index33 alt1">34</div>
<div class="line number35 index34 alt2">35</div>
<div class="line number36 index35 alt1">36</div>
<div class="line number37 index36 alt2">37</div>
<div class="line number38 index37 alt1">38</div>
<div class="line number39 index38 alt2">39</div>
<div class="line number40 index39 alt1">40</div>
<div class="line number41 index40 alt2">41</div>
<div class="line number42 index41 alt1">42</div>
<div class="line number43 index42 alt2">43</div>
<div class="line number44 index43 alt1">44</div>
<div class="line number45 index44 alt2">45</div>
<div class="line number46 index45 alt1">46</div>
<div class="line number47 index46 alt2">47</div>
<div class="line number48 index47 alt1">48</div>
<div class="line number49 index48 alt2">49</div>
<div class="line number50 index49 alt1">50</div>
<div class="line number51 index50 alt2">51</div>
<div class="line number52 index51 alt1">52</div>
<div class="line number53 index52 alt2">53</div>
<div class="line number54 index53 alt1">54</div>
<div class="line number55 index54 alt2">55</div>
<div class="line number56 index55 alt1">56</div>
<div class="line number57 index56 alt2">57</div>
<div class="line number58 index57 alt1">58</div>
<div class="line number59 index58 alt2">59</div>
<div class="line number60 index59 alt1">60</div>
<div class="line number61 index60 alt2">61</div>
<div class="line number62 index61 alt1">62</div>
<div class="line number63 index62 alt2">63</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="py keyword">from</code> <code class="py plain">flask </code><code class="py keyword">import</code> <code class="py plain">(Flask, request, jsonify)</code></div>
<div class="line number2 index1 alt1"><code class="py spaces">                   </code> </div>
<div class="line number3 index2 alt2"><code class="py plain">app </code><code class="py keyword">=</code> <code class="py plain">Flask(__name__)</code></div>
<div class="line number4 index3 alt1"> </div>
<div class="line number5 index4 alt2"><code class="py plain">html_page </code><code class="py keyword">=</code> <code class="py comments">"""&lt;!DOCTYPE HTML&gt;</code></div>
<div class="line number6 index5 alt1"><code class="py comments">&lt;html&gt;</code></div>
<div class="line number7 index6 alt2"><code class="py comments">&lt;head&gt;</code></div>
<div class="line number8 index7 alt1"><code class="py comments">&lt;title&gt;Rough AJAX Test&lt;/title&gt;</code></div>
<div class="line number9 index8 alt2"><code class="py comments">&lt;script&gt;</code></div>
<div class="line number10 index9 alt1"><code class="py spaces">    </code><code class="py comments">function loadXMLDoc()</code></div>
<div class="line number11 index10 alt2"><code class="py spaces">    </code><code class="py comments">{</code></div>
<div class="line number12 index11 alt1"><code class="py spaces">        </code><code class="py comments">var req = new XMLHttpRequest()</code></div>
<div class="line number13 index12 alt2"><code class="py spaces">        </code><code class="py comments">req.onreadystatechange = function()</code></div>
<div class="line number14 index13 alt1"><code class="py spaces">        </code><code class="py comments">{</code></div>
<div class="line number15 index14 alt2"><code class="py spaces">            </code><code class="py comments">if (req.readyState == 4)</code></div>
<div class="line number16 index15 alt1"><code class="py spaces">            </code><code class="py comments">{</code></div>
<div class="line number17 index16 alt2"><code class="py spaces">                </code><code class="py comments">if (req.status != 200)</code></div>
<div class="line number18 index17 alt1"><code class="py spaces">                </code><code class="py comments">{</code></div>
<div class="line number19 index18 alt2"><code class="py spaces">                    </code><code class="py comments">//error handling code here</code></div>
<div class="line number20 index19 alt1"><code class="py spaces">                </code><code class="py comments">}</code></div>
<div class="line number21 index20 alt2"><code class="py spaces">                </code><code class="py comments">else</code></div>
<div class="line number22 index21 alt1"><code class="py spaces">                </code><code class="py comments">{</code></div>
<div class="line number23 index22 alt2"><code class="py spaces">                    </code><code class="py comments">var response = JSON.parse(req.responseText)</code></div>
<div class="line number24 index23 alt1"><code class="py spaces">                    </code><code class="py comments">document.getElementById('myDiv').innerHTML = response.username</code></div>
<div class="line number25 index24 alt2"><code class="py spaces">                </code><code class="py comments">}</code></div>
<div class="line number26 index25 alt1"><code class="py spaces">            </code><code class="py comments">}</code></div>
<div class="line number27 index26 alt2"><code class="py spaces">        </code><code class="py comments">}</code></div>
<div class="line number28 index27 alt1"><code class="py spaces">    </code> </div>
<div class="line number29 index28 alt2"><code class="py spaces">        </code><code class="py comments">req.open('POST', '/ajax')</code></div>
<div class="line number30 index29 alt1"><code class="py spaces">        </code><code class="py comments">req.setRequestHeader("Content-type", "application/x-www-form-urlencoded")</code></div>
<div class="line number31 index30 alt2"><code class="py spaces">        </code><code class="py comments">var un = document.getElementById('scname').value</code></div>
<div class="line number32 index31 alt1"><code class="py spaces">        </code><code class="py comments">var sec = document.getElementById('secret').value</code></div>
<div class="line number33 index32 alt2"><code class="py spaces">        </code><code class="py comments">var postVars = 'username='+un+'&amp;secret='+sec</code></div>
<div class="line number34 index33 alt1"><code class="py spaces">        </code><code class="py comments">req.send(postVars)</code></div>
<div class="line number35 index34 alt2"><code class="py spaces">        </code> </div>
<div class="line number36 index35 alt1"><code class="py spaces">        </code><code class="py comments">return false</code></div>
<div class="line number37 index36 alt2"><code class="py spaces">    </code><code class="py comments">}</code></div>
<div class="line number38 index37 alt1"><code class="py comments">&lt;/script&gt;</code></div>
<div class="line number39 index38 alt2"><code class="py comments">&lt;/head&gt;</code></div>
<div class="line number40 index39 alt1"><code class="py comments">&lt;body&gt;</code></div>
<div class="line number41 index40 alt2"><code class="py comments">&lt;h1&gt;Flask AJAX Test&lt;/h1&gt;</code></div>
<div class="line number42 index41 alt1"><code class="py comments">&lt;form action="" method="POST"&gt;</code></div>
<div class="line number43 index42 alt2"><code class="py comments">&lt;input type="text" name="scname" id="scname"&gt;</code></div>
<div class="line number44 index43 alt1"><code class="py comments">&lt;input type="hidden" name="secret" id="secret" value="shhh"&gt;</code></div>
<div class="line number45 index44 alt2"><code class="py comments">&lt;input type="button" value="Submit" onclick="return loadXMLDoc()"&gt;</code></div>
<div class="line number46 index45 alt1"><code class="py comments">&lt;/form&gt;</code></div>
<div class="line number47 index46 alt2"><code class="py comments">&lt;div id="myDiv"&gt;&lt;/div&gt;</code></div>
<div class="line number48 index47 alt1"><code class="py comments">&lt;/body&gt;</code></div>
<div class="line number49 index48 alt2"><code class="py comments">&lt;/html&gt;"""</code></div>
<div class="line number50 index49 alt1"> </div>
<div class="line number51 index50 alt2"><code class="py decorator">@app</code><code class="py plain">.route(</code><code class="py string">'/'</code><code class="py plain">)</code></div>
<div class="line number52 index51 alt1"><code class="py keyword">def</code> <code class="py plain">index():</code></div>
<div class="line number53 index52 alt2"><code class="py spaces">    </code><code class="py keyword">return</code> <code class="py plain">html_page</code></div>
<div class="line number54 index53 alt1"><code class="py spaces">        </code> </div>
<div class="line number55 index54 alt2"><code class="py spaces">        </code> </div>
<div class="line number56 index55 alt1"><code class="py decorator">@app</code><code class="py plain">.route(</code><code class="py string">'/ajax'</code><code class="py plain">, methods </code><code class="py keyword">=</code> <code class="py plain">[</code><code class="py string">'POST'</code><code class="py plain">])</code></div>
<div class="line number57 index56 alt2"><code class="py keyword">def</code> <code class="py plain">ajax_request():</code></div>
<div class="line number58 index57 alt1"><code class="py spaces">    </code><code class="py plain">username </code><code class="py keyword">=</code> <code class="py plain">request.form[</code><code class="py string">'username'</code><code class="py plain">]</code></div>
<div class="line number59 index58 alt2"><code class="py spaces">    </code><code class="py keyword">return</code> <code class="py plain">jsonify(username</code><code class="py keyword">=</code><code class="py plain">username)</code></div>
<div class="line number60 index59 alt1"><code class="py spaces">    </code> </div>
<div class="line number61 index60 alt2"><code class="py spaces">    </code> </div>
<div class="line number62 index61 alt1"><code class="py keyword">if</code> <code class="py plain">__name__ </code><code class="py keyword">=</code><code class="py keyword">=</code> <code class="py string">"__main__"</code><code class="py plain">:</code></div>
<div class="line number63 index62 alt2"><code class="py spaces">    </code><code class="py plain">app.run(debug </code><code class="py keyword">=</code> <code class="py color1">True</code><code class="py plain">)</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>以上的 html 原始碼可以利用<span> </span><a href="https://html-online.com/editor/">https://html-online.com/editor/</a><span> </span>進行編輯.</p>
<h2>W8</h2>
<h6>網際 RoboDK 程式</h6>
<h4>下半學期的教學目標之三:</h4>
<p>利用<span> </span><a href="https://robodk.com/">RoboDK</a><span> </span>作為整合英文, 數學與網際內容管理相關技術的測試工具, 希望能夠透過網際程式控制特定的六軸機械手臂 (<a href="https://robodk.com/blog/online-programming/">參考</a>,<span> </span><a href="https://robodk.com/doc/en/Basic-Guide.html">Guide</a>).</p>
<p>官方 Pick and Place 範例:<span> </span><a href="https://github.com/mdecourse/wcm2021/tree/main/downloads/robodk/pick_and_place">https://github.com/mdecourse/wcm2021/tree/main/downloads/robodk/pick_and_place</a></p>
<h4>自行利用 Python API 建立 station:</h4>
<p>從<span> </span><a href="https://github.com/mdecourse/wcm2021/tree/main/downloads/robodk/pick_and_place_kmol_mac">https://github.com/mdecourse/wcm2021/tree/main/downloads/robodk/pick_and_place_kmol_mac</a><span> </span>目錄, 可以使用 Python 建立 RoboDK station:</p>
<p>程式碼:<span> </span><a href="https://github.com/mdecourse/wcm2021/blob/main/downloads/robodk/pick_and_place_kmol_mac/pick_and_place_kmol.py">https://github.com/mdecourse/wcm2021/blob/main/downloads/robodk/pick_and_place_kmol_mac/pick_and_place_kmol.py</a></p>
<p>所完成的 station:</p>
<p><img alt="" height="299" src="http://mde.tw/wcm2021/images/robodk_all_in_python.png" width="500"/></p>
<p>RoboDK Forum:<span> </span><a href="https://robodk.com/forum">https://robodk.com/forum</a></p>
<p>Euler Angles:<span> </span><a href="https://www.mecademic.com/en/how-is-orientation-in-space-represented-with-euler-angles">https://www.mecademic.com/en/how-is-orientation-in-space-represented-with-euler-angles</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/RoboDK-Doc-EN-Getting-Started.pdf">RoboDK-Doc-EN-Getting-Started.pdf</a></p>
<p><a href="https://en.wikipedia.org/wiki/Robotics_simulator">https://en.wikipedia.org/wiki/Robotics_simulator</a></p>
<p><a href="https://github.com/RoboDK?tab=repositories">https://github.com/RoboDK?tab=repositories</a></p>
<p><a href="https://robodk.com/doc/en/PythonAPI/">https://robodk.com/doc/en/PythonAPI/</a></p>
<p><a href="https://robodk.com/offline-programming">https://robodk.com/offline-programming</a></p>
<p><a href="https://robodk.com/doc/en/PythonAPI/robolink.html">https://robodk.com/doc/en/PythonAPI/robolink.html</a></p>
<p><a href="https://www.automate.org/news/9-powerful-robodk-features-you-might-not-know-about">https://www.automate.org/news/9-powerful-robodk-features-you-might-not-know-about</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/2016_Flapping-wing%20mechanism%20for%20a%20bird-sizedUAVs%20%20design,%20modeling%20and%20control.pdf">2016_Flapping-wing mechanism for a bird-sizedUAVs design, modeling and control.pdf</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/2018_Implementation%20of%20a%20Simulation%20System%20for%20Additive%20Task%20Experiments.pdf">2018_Implementation of a Simulation System for Additive Task Experiments.pdf</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/2019_Multi-Robot%20Collaboration.pdf">2019_Multi-Robot Collaboration.pdf</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/2019_3D%20Printing%20using%20an%20Industrial%20Robotic%20Arm%20and%20a%20Cellulose%20based%20filament.pdf">2019_3D Printing using an Industrial Robotic Arm and a Cellulose based filament.pdf</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/2019_Towards%20the%20Development%20of%20Safe,%20Collaborative%20RoboticFreehand%20Ultrasound.pdf">2019_Towards the Development of Safe, Collaborative RoboticFreehand Ultrasound.pdf</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/2020_Simulator%20for%20Articulate%20Robots.pdf">2020_Simulator for Articulate Robots.pdf</a></p>
<p><a href="https://link.springer.com/book/10.1007/978-3-030-38897-3">2020 Robot Adventures in Python and C.pdf</a></p>
<p><a href="https://vmayoral.github.io/robots,/ai,/deep/learning,/rl,/reinforcement/learning/2016/07/06/rl-intro/">https://vmayoral.github.io/robots,/ai,/deep/learning,/rl,/reinforcement/learning/2016/07/06/rl-intro/</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/Industrial_robots1.pdf">Industrial_robots1.pdf</a></p>
<p><a href="http://mde.tw/wcm2021/downloads/IntroRobotKinematics5.pdf">IntroRobotKinematics5.pdf</a></p>
<h4>RoboDK 版本:<span> </span><a href="https://robodk.com/whatsnew">https://robodk.com/whatsnew</a></h4>
<h4>RoboDK 5.2.2 安裝</h4>
<p>內定安裝於 c:\robodk</p>
<p>可附帶安裝 Python 3.7.3, 並安裝 robodk 模組</p>
<p>會先安裝 vcredist_x64_2017</p>
<p>安裝版 30 天內可存檔, 必須 IPv4 上網才能取得 free trial 30 天權限.</p>
<p>RoboDK 的 remote API 必須先 IPv4 上網後, 經官方網站確認 License 後, 才可啟動 API server, 否則只能在 localhost 上執行 API 操控.</p>
<h4>電腦輔助設計室網路連線順序:</h4>
<ol>
<li>以 IPv4 NAT 連線, 啟動可攜 RoboDK 取得 limited 連線授權.</li>
<li>改以純 IPv6 網路連線, 內部建立 192.168.192.1XX 網路群, 按照組序與學員序取得 IPv4 固定網址.</li>
<li>各學員可以透過 Proxy 取得 Robot library 中的資料, 並且透過 remote API 進行網際協同操控.</li>
</ol>
<p><a href="http://mde.tw/wcm2021/downloads/Setup%20and%20Interfacing%20of%20a%20KUKA%20RoboticsLab.pdf">Setup and Interfacing of a KUKA RoboticsLab.pdf</a></p>
<p>RoboDK API for Python:</p>
<p><a href="https://raw.githubusercontent.com/RoboDK/RoboDK-API/master/Python/robodk.py">https://raw.githubusercontent.com/RoboDK/RoboDK-API/master/Python/robodk.py</a></p>
<p><a href="https://raw.githubusercontent.com/RoboDK/RoboDK-API/master/Python/robolink.py">https://raw.githubusercontent.com/RoboDK/RoboDK-API/master/Python/robolink.py</a></p>
<p>The robolink module is the bridge between RoboDK and Python. Every object in the RoboDK item tree can be retrieved and it is represented by the object Item. An item can be a robot, a reference frame, a tool, an object or any other item visible in the station tree.</p>
<p>The following example uses the robodk and robolink libraries to move a robot.</p>
<div>
<div class="syntaxhighlighter py" id="highlighter_851975">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="py keyword">from</code> <code class="py plain">robolink </code><code class="py keyword">import</code> <code class="py keyword">*</code>              <code class="py comments"># import the robolink library (bridge with RoboDK)</code></div>
<div class="line number2 index1 alt1"><code class="py comments"># 假如跨網路執行 Python remote API, 則提供位於遠端的 RoboDK server ip</code></div>
<div class="line number3 index2 alt2"><code class="py plain">RDK </code><code class="py keyword">=</code> <code class="py plain">Robolink(</code><code class="py string">'server_ipv4_ip_address'</code><code class="py plain">)                    </code><code class="py comments"># establish a link with the simulator</code></div>
<div class="line number4 index3 alt1"><code class="py plain">robot </code><code class="py keyword">=</code> <code class="py plain">RDK.Item(</code><code class="py string">'ABB IRB 120-3/0.6'</code><code class="py plain">)      </code><code class="py comments"># retrieve the robot by name</code></div>
<div class="line number5 index4 alt2"><code class="py plain">robot.setJoints([</code><code class="py value">0</code><code class="py plain">,</code><code class="py value">0</code><code class="py plain">,</code><code class="py value">0</code><code class="py plain">,</code><code class="py value">0</code><code class="py plain">,</code><code class="py value">0</code><code class="py plain">,</code><code class="py value">0</code><code class="py plain">])      </code><code class="py comments"># set all robot axes to zero</code></div>
<div class="line number6 index5 alt1"> </div>
<div class="line number7 index6 alt2"><code class="py plain">target </code><code class="py keyword">=</code> <code class="py plain">RDK.Item(</code><code class="py string">'Target'</code><code class="py plain">)         </code><code class="py comments"># retrieve the Target item</code></div>
<div class="line number8 index7 alt1"><code class="py plain">robot.MoveJ(target)                 </code><code class="py comments"># move the robot to the target</code></div>
<div class="line number9 index8 alt2"><code class="py comments">'''</code></div>
<div class="line number10 index9 alt1"><code class="py comments"># calculate a new approach position 100 mm along the Z axis of the tool with respect to the target</code></div>
<div class="line number11 index10 alt2"><code class="py comments">from robodk import *                # import the robodk library (robotics toolbox)</code></div>
<div class="line number12 index11 alt1"><code class="py comments">approach = target.Pose()*transl(0,0,-100)</code></div>
<div class="line number13 index12 alt2"><code class="py comments">robot.MoveL(approach)               # linear move to the approach position</code></div>
<div class="line number14 index13 alt1"><code class="py comments">'''</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>有關 Python struct:<span> </span><a href="https://docs.python.org/3/library/struct.html">https://docs.python.org/3/library/struct.html</a></p>
<p>command line option:<span> </span><a href="https://robodk.com/doc/en/RoboDK-API-Command-Line-Options.html">https://robodk.com/doc/en/RoboDK-API-Command-Line-Options.html</a></p>
<p>RDK = Robolink(args='-ADDFRAME "-RENAME=Main Ref " load_object.stl')</p>
<p>robolink modula:<span> </span><a href="https://robodk.com/doc/en/PythonAPI/robolink.html#robolink.Robolink.ShowRoboDK">https://robodk.com/doc/en/PythonAPI/robolink.html#robolink.Robolink.ShowRoboDK</a></p>
<p>RoboDK Mac 最新版安裝檔:<span> </span><a href="https://robodk.com/downloads/Install-RoboDK.dmg">https://robodk.com/downloads/Install-RoboDK.dmg</a></p>
<p>RoboDK Linux 最新安裝檔:<span> </span><a href="https://robodk.com/downloads/install-robodk-64.tar.gz">https://robodk.com/downloads/install-robodk-64.tar.gz</a></p>
<h4>RoboDK 透過遠端桌面執行:</h4>
<p>由於顯示卡硬體功能受到限制, 因此透過 remote desktop 執行 RoboDK 時, 必須使用 C:/RoboDK/RoboDK-Safe-Start-VM.bat 啟動 RoboDK, 批次檔案內容如下:</p>
<div>
<div class="syntaxhighlighter js" id="highlighter_724732">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="js plain">cd bin</code></div>
<div class="line number2 index1 alt1"><code class="js plain">set QT_OPENGL=software</code></div>
<div class="line number3 index2 alt2"><code class="js plain">start </code><code class="js string">""</code> <code class="js plain">RoboDK-GL2.exe -DEBUG -SKIPINI</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<h4>RoboDK allow external API (<a href="https://robodk.com/doc/en/PythonAPI/robolink.html#robolink.Robolink">reference</a>):</h4>
<p>目前 RoboDK 的<span> </span><a href="https://raw.githubusercontent.com/RoboDK/RoboDK-API/master/Python/robolink.py">https://raw.githubusercontent.com/RoboDK/RoboDK-API/master/Python/robolink.py</a><span> </span>僅支援 IPv4, 必須將 socket 傳送改為 IPv6, 可參考:<span> </span><a href="https://hub.packtpub.com/ipv6-unix-domain-sockets-and-network-interfaces/">https://hub.packtpub.com/ipv6-unix-domain-sockets-and-network-interfaces/</a></p>
<p>假如要在電腦輔助設計室中跨網路執行 RoboDK remote API, 可以在 IPv6 環境下創建一個內部 IPv4 群網路進行測試.</p>
<p>設定 RoboDK remote API 位於 Tools - Options - Other - RoboDK API, 啟動 RoboDK remote API server 後, 必須讓 RoboDK 通過操作系統的防火牆.</p>
<h4>RoboDK on Virtualbox (<a href="https://robodk.com/forum/Thread-Running-RoboDK-on-an-oracle-Virtual-machine">reference</a>):</h4>
<p>I recommend you to start RoboDK by selecting:<br/>C:/RoboDK/RoboDK-Safe-Start-VM.bat<br/><br/>Make sure to install graphic card drivers and allocate hardware accelerated GPU with support for OpenGL, if possible.<br/><br/>If it fails, we can better debug this issue by following these steps.<br/><br/>    Start RoboDK by double clicking the file:<br/>    C:/RoboDK/RoboDK-Debug.bat<br/>    Try to reproduce the problem in RoboDK until it crashes.<br/>    Right after the crash, provide the following file:<br/>    C:/RoboDK/bin/RoboDK.debug.txt</p>
<h4>Hint:</h4>
<p>MoveJ(self, target, blocking=True)<span> </span><a href="https://robodk.com/forum/Thread-Get-robot-pose-while-the-robot-is-moving-to-a-target">reference</a><br/>Moves a robot to a specific target ("Move Joint" mode). self function blocks until the robot finishes its movements.<br/>In  1 : joints/pose/item -&gt; target to move to. It can be the robot joints (Nx1 or 1xN), the pose (4x4) or an item (item pointer)<br/>In  2 (optional): blocking -&gt; True if we want the instruction to wait until the robot finished the movement (default=True)</p>
<p>add Camera:<span> </span><a href="https://robodk.com/doc/en/PythonAPI/robolink.html#robolink.Robolink.Cam2D_Add">https://robodk.com/doc/en/PythonAPI/robolink.html#robolink.Robolink.Cam2D_Add</a></p>
<h4>Temp py programs:</h4>
<p><a href="https://robodk.com/forum/Thread-Convert-a-main-program-to-a-python-script">https://robodk.com/forum/Thread-Convert-a-main-program-to-a-python-script</a></p>
<h4>Set Robot base:</h4>
<div>
<div class="syntaxhighlighter py" id="highlighter_851029">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="py plain">RDK </code><code class="py keyword">=</code> <code class="py plain">robolink()</code></div>
<div class="line number2 index1 alt1"> </div>
<div class="line number3 index2 alt2"><code class="py plain">robot_base </code><code class="py keyword">=</code> <code class="py plain">RDK.Item(</code><code class="py string">'Robot Base Name'</code><code class="py plain">, ITEM_TYPE_FRAME)</code></div>
<div class="line number4 index3 alt1"><code class="py plain">robot_base.setPose(</code><code class="py value">4x4</code> <code class="py plain">mat with the position)</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>參考:</p>
<p>提供原始碼的<span> </span><a href="http://animatlab.com/">http://animatlab.com/</a></p>
<h2>W9</h2>
<h6><strong></strong>打期望分數</h6>
<h2>W10</h2>
<p>網際內容管理系統下半學期將有以下幾個主要教學目標:</p>
<ol>
<li>對<span> </span><span>Python Flask 網際程式</span>的架構能夠更加深入了解, 各學員不僅會利用<span> </span><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">Beautifulsoup</a><span> </span>從學校教務主機擷取資料, 建立<span> </span><a href="https://www.heroku.com/">Heroku</a><span> </span>雲端應用程式, 列出各實驗室的排課資訊外, 能計算各實驗室的排課總時數, 同時也能將查得的資料分別存入 SQLite 與 PostgreSQL 資料庫 (flaskg 範例<a href="https://github.com/mdecourse/flaskg">倉儲</a>與<a href="https://flaskg.herokuapp.com/">網站</a>).</li>
<li>要求學員有能力<span>自行編寫</span>如<a href="https://github.com/mdecourse/scissor-rock-paper2">網際猜拳</a>,<span> </span><a href="https://github.com/mdecourse/lookupdict">網際英英字典</a><span> </span>(<a href="http://lookupdict.herokuapp.com/">http://lookupdict.herokuapp.com</a>, 採 scrum1 At mde 部署), 以及其他與<a href="https://github.com/mdecourse/wcms-scrum1">機械設計較相關的網際程式</a><span> </span>(包括<a href="https://wcms-scrum1.herokuapp.com/drawflag">猜數字遊戲</a>,<span> </span><a href="https://wcms-scrum1.herokuapp.com/gear_index">正齒輪齒面寬設計</a>,<span> </span><a href="https://wcms-scrum1.herokuapp.com/drawflag">2D 繪圖</a>等).</li>
<li>利用<span> </span><a href="https://robodk.com/">RoboDK</a><span> </span>作為整合英文, 數學與網際內容管理相關技術的測試工具, 希望能夠透過網際程式控制特定的六軸機械手臂 (<a href="https://robodk.com/blog/online-programming/">參考</a>,<span> </span><a href="https://robodk.com/doc/en/Basic-Guide.html">Guide</a>).</li>
<li>編寫能夠協助 CMSiMDE<span> </span><span>分頁</span>錯誤時進行 debug 的<span>輔助程式</span><span> </span>(擬採用<span> </span><a href="https://github.com/PySimpleGUI/PySimpleGUI">https://github.com/PySimpleGUI/PySimpleGUI</a><span> </span>or<span> </span><a href="https://github.com/dddomodossola/remi">https://github.com/dddomodossola/remi</a><span> </span>進行測試), 假如要讓 CMSiMDE 能夠透過中文斷字 (<a href="https://github.com/fxsjy/jieba">https://github.com/fxsjy/jieba</a>), 試著解讀網際內容管理的關鍵字, 進而了解網站的內容屬性.</li>
</ol>
<p>根據下圖所示, 四年前所部署的<span> </span><a href="https://wcms-scrum1.herokuapp.com/">https://wcms-scrum1.herokuapp.com/</a><span> </span>所使用的 The Heroku-16 stack is deprecated, 意即<span> </span><a href="https://help.heroku.com/0S5P41DC/heroku-16-end-of-life-faq">Heroku-16 stack</a><span> </span>將要在 2021.06.01 終止 build 功能, 因此部署在此雲端硬體平台的應用程式, 若要持續改版, 必須要在生命週期結束之前搬遷到其他硬體平台上:</p>
<p><img alt="" height="304" src="http://mde.tw/wcm2021/images/heroku-16_deprecated.png" width="600"/></p>
<p><a href="https://mde.tw/wcm2021/content/SQLite.html">SQLite 練習</a></p>
<p>目的希望能將之前所寫的各實驗室排課表網際程式, 能將所查詢的資料存入 SQLite, 並且部署到 Heroku.</p>
<p>之後再將資料庫應用至 PostgreSQL, 最後再將網際資料庫程式部署到 Heroku.</p>
<p>若該網際程式配置 Oauth2 的登入套件, 即可延伸應用至各實驗室上課時段外的實驗室借用管理系統. 若再利用雲端點名系統 RFID 掃描的感應開門, 將可擴大此系統的應用範圍.</p>
<h2>W11</h2>
<h4>1. OBS + Youtube 分組直播錄影測試:</h4>
<p><span>首次進行 Youtube 直播需要等待 24 小時後才可啟用.</span></p>
<p>假如是在 Mac 環境安裝 OBS, 必須至 System Preferences - Security &amp; Privacy 處允許 OBS 使用 Camera 與 Screen Recording.</p>
<p>在 IPv6 環境下進行各分組桌面操作直播錄影</p>
<p>登入 @gm 帳號後連結至 Youtube 選擇 Live stream, 取得直播金鑰</p>
<p>將直播金鑰輸入 OBS, 啟動顯示器擷取, 透過串流訊號將桌面操作影像傳至 Youtube 進行直播錄影.</p>
<p>根據<span> </span><a href="http://mde.tw/cd2021/content/task2.html">http://mde.tw/cd2021/content/task2.html</a><span> </span>進行 IPv6 + 區域網路操控進行測試.</p>
<p>參考<span> </span><a href="http://mde.tw/cd2021/content/task3.html">http://mde.tw/cd2021/content/task3.html</a><span> </span>使用各組網際簡報內容引導直撥錄影.</p>
<h4>2. 各分組從<span> </span><a href="http://mde.tw/wcm2021/content/W10.html">http://mde.tw/wcm2021/content/W10.html</a><span> </span>網際程式中選擇一項, 負責從近端執行部署至 Heroku.</h4>
<h4>自行利用 Ubuntu 建立可啟動 CMSiMDE 動態系統與 Fossil SCM 伺服器的目的:</h4>
<p>建立完整的 Python 網際程式開發環境.</p>
<p>開發的程式碼可採用 Fossil SCM 與 Github 同步的方式進行分散式版次管理.</p>
<p>Ubuntu 20.04 on Virtualbox, 從<span> </span><a href="http://a.kmol.info:88/Ub2004.vdi">http://a.kmol.info:88/Ub2004.vdi</a><span> </span>取得 已經安裝 Ubuntu 的虛擬硬碟進行後續設定. 或者自行下載 Ubuntu 20.04 Desktop 版 iso 檔案自行安裝帶有桌面的虛擬主機.</p>
<h4><span>先更改 vdi 的 uuid</span>:</h4>
<div>
<div class="syntaxhighlighter js" id="highlighter_85897">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="js string">"c:\Program Files\Oracle\VirtualBox\VBoxManage.exe"</code> <code class="js plain">internalcommands sethduuid Ubwcm2021.vdi</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<h4>設定虛擬主機網路連線:</h4>
<p>接著將 Ubuntu 虛擬主機的網路以 Bridged 串接到 Windows 10 已經連線的網路卡.</p>
<h4>登入系統後進行更新:</h4>
<p>由於 /etc/netplan/net.yaml 中採用 DHCP6 連外, 因此透過 ifconfig 可以取得網路連線資訊.</p>
<p>但因電腦輔助設計室採純 IPv6 設定, 因此必須透過雙網路協定代理主機上網才可執行下列 apt 指令.</p>
<p>因此要以 sudo vi  /etc/apt/apt.conf 建立<span> </span><span>apt 代理主機設定檔</span>, 內容如下:</p>
<div>
<div class="syntaxhighlighter js" id="highlighter_9252">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code class="js plain">Acquire::http::Proxy </code><code class="js string">"http://proxy_username:proxy_password@[Proxy_server_ipv6_address]:3128"</code><code class="js plain">;</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>之後就可以完成下列更新指令執行:</p>
<p>sudo apt update</p>
<p>sudo apt upgrade</p>
<p>sudo apt autoremove</p>
<h2>W12</h2>
<p>全不懂老師在說甚麼，robodk、虛擬網站、FileZillaPortable、Oracle VM VirtualBox一大堆不明白的東西進入腦子，只能勉強記憶下來，回去再好好消化。</p>
<p>回去想辦法處理robodk看了影片還是完全不懂，只好求助同學跟私訊老師，而虛擬網站之後的只是更加糟糕。</p>
<h2>W13</h2>
<p></p>
<p></p>
<p></p>